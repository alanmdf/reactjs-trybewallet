(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),c=n.n(i),l=n(17),o=(n(38),n(13)),u=n(2),s=n(15),d=n(4),h=n(5),p=n(8),m=n(7),E=n(6),b=n(19),f=n.n(b),v=n(24),C=n(3),g=function(e,t){return{type:"SET_EXPENSE",expense:Object(C.a)(Object(C.a)({},t),{},{exchangeRates:e})}},j=function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,t({type:"GET_CURRENCIES_SUCCESS",currencies:Object.keys(a).filter((function(e){return"USDT"!==e}))});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={email:"",password:""},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(h.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(s.a)({},n,a))}},{key:"handleClick",value:function(){var e=this.state.email;(0,this.props.userEmail)(e)}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=!0;return/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+?$/i.test(t)&&n.length>=6&&(a=!1),r.a.createElement("form",{action:""},r.a.createElement("label",{htmlFor:"email-input"},"Email:",r.a.createElement("input",{type:"email",name:"email","data-testid":"email-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password-input"},"Password:",r.a.createElement("input",{type:"password",name:"password","data-testid":"password-input",minLength:"6",onChange:this.handleChange})),r.a.createElement(l.b,{to:"/carteira"},r.a.createElement("button",{type:"button",disabled:a,onClick:this.handleClick},"Entrar")))}}]),n}(r.a.Component),y=Object(o.b)(null,(function(e){return{userEmail:function(t){return e(function(e){return{type:"LOGIN",email:e}}(t))}}}))(O),x=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.inputValue,a=e.optionsArray,i=e.handleChange,c=e.placeholder;return r.a.createElement("label",{htmlFor:n},t,r.a.createElement("select",{name:n,id:n,onChange:i,value:c},a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}}]),n}(r.a.Component),k=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],S=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],w=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(s.a)({},a,n))}},{key:"handleClick",value:function(){var e=this.props,t=e.setExpense,n=e.expenses,a=this.state,r=a.value,i=a.description,c=a.currency,l=a.method,o=a.tag;t({id:n.length,value:r,description:i,currency:c,method:l,tag:o})}},{key:"render",value:function(){var e=this.props.currencies,t=void 0===e?[]:e;return r.a.createElement("form",{action:""},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{name:"value",id:"value",type:"text",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{name:"description",id:"description",type:"text",onChange:this.handleChange})),r.a.createElement(x,{label:"Moeda",inputValue:"currency",optionsArray:t,handleChange:this.handleChange}),r.a.createElement(x,{label:"M\xe9todo de pagamento",inputValue:"method",optionsArray:k,handleChange:this.handleChange}),r.a.createElement(x,{label:"Tag",inputValue:"tag",optionsArray:S,handleChange:this.handleChange}),r.a.createElement("button",{type:"button",onClick:this.handleClick},"Adicionar despesa"))}}]),n}(r.a.Component),F=Object(o.b)((function(e){var t=e.wallet;return{currencies:t.currencies,expenses:t.expenses}}),(function(e){return{getCurrencies:function(){return e(j())},setExpense:function(t){return e(function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return a=t.sent,t.next=5,a.json();case 5:r=t.sent,n(g(r,e));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(w),D=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")))}}]),n}(r.a.Component),T=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.expenses,n=void 0===t?[]:t,a=e.handleClick,i=e.editExpense;return r.a.createElement("table",null,r.a.createElement(D,null),r.a.createElement("tbody",null,n.sort((function(e,t){return e.id-t.id})).map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.exchangeRates[e.currency].name.replace(/\/.{1,}/,"")),r.a.createElement("td",null,Number(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,Number(e.value*e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return i(e)}},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return a(e)}},"Excluir")))}))))}}]),n}(r.a.Component),N=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.total;return r.a.createElement("header",null,r.a.createElement("p",{"data-testid":"email-field"},t),r.a.createElement("p",{"data-testid":"total-field"},n," ",r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")," "))}}]),n}(r.a.Component),R=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],_=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],I=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(s.a)({},a,n))}},{key:"handleClick",value:function(){var e=this.props,t=e.editExpense,n=e.finishEditExpense,a=e.quitEditForm,r=this.state,i=r.value,c=r.description,l=r.currency,o=r.method,u=r.tag;n({id:t[0].id,value:i,description:c,currency:l,method:o,tag:u,exchangeRates:t[0].exchangeRates}),a()}},{key:"render",value:function(){var e=this.props,t=e.currencies,n=void 0===t?[]:t,a=e.editExpense,i=void 0===a?[]:a;return r.a.createElement("form",{action:""},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{name:"value",id:"value",type:"text",placeholder:i[0].value,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{name:"description",id:"description",type:"text",placeholder:i[0].description,onChange:this.handleChange})),r.a.createElement(x,{label:"Moeda",inputValue:"currency",optionsArray:n,placeholder:i[0].currency,handleChange:this.handleChange}),r.a.createElement(x,{label:"M\xe9todo de pagamento",inputValue:"method",optionsArray:R,placeholder:i[0].method,handleChange:this.handleChange}),r.a.createElement(x,{label:"Tag",inputValue:"tag",optionsArray:_,placeholder:i[0].tag,handleChange:this.handleChange}),r.a.createElement("button",{type:"button",onClick:this.handleClick},"Editar despesa"))}}]),n}(r.a.Component),V=Object(o.b)((function(e){var t=e.wallet;return{currencies:t.currencies,editExpense:t.editExpense}}),(function(e){return{getCurrencies:function(){return e(j())},finishEditExpense:function(t){return e(function(e){return{type:"FINISH_EDIT_EXPENSE",expense:e}}(t))}}}))(I),A=function(e){Object(m.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={editForm:!1},e.handleClick=e.handleClick.bind(Object(p.a)(e)),e.editExpense=e.editExpense.bind(Object(p.a)(e)),e.finishEdit=e.finishEdit.bind(Object(p.a)(e)),e}return Object(h.a)(n,[{key:"handleClick",value:function(e){(0,this.props.removeExpense)(e)}},{key:"editExpense",value:function(e){var t=this.props.editExpense;this.setState({editForm:!0}),t(e)}},{key:"finishEdit",value:function(){this.setState({editForm:!1})}},{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses,a=this.state.editForm,i=n.map((function(e){return e.value*e.exchangeRates[e.currency].ask})),c=0;return 0===i.length||(c=i.reduce((function(e,t){return e+t})).toFixed(2)),r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{email:t,total:c}),a?r.a.createElement(V,{quitEditForm:this.finishEdit}):r.a.createElement(F,null),r.a.createElement(T,{expenses:n,handleClick:this.handleClick,editExpense:this.editExpense}))}}]),n}(r.a.Component),M=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),(function(e){return{removeExpense:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",expense:e}}(t))},editExpense:function(t){return e(function(e){return{type:"EDIT_EXPENSE",expense:e}}(t))}}}))(A);var P=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:y}),r.a.createElement(u.a,{exact:!0,path:"/carteira",component:M}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(14),U=n(31),z=n(32),L={email:""},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(C.a)(Object(C.a)({},e),{},{email:t.email});default:return e}},B=n(27),W={currencies:[],expenses:[],editExpense:[]},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENCIES_SUCCESS":return Object(C.a)(Object(C.a)({},e),{},{currencies:t.currencies});case"SET_EXPENSE":return Object(C.a)(Object(C.a)({},e),{},{expenses:[].concat(Object(B.a)(e.expenses),[t.expense])});case"REMOVE_EXPENSE":return Object(C.a)(Object(C.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.expense.id}))});case"EDIT_EXPENSE":return Object(C.a)(Object(C.a)({},e),{},{editExpense:e.expenses.filter((function(e){return e.id===t.expense.id}))});case"FINISH_EDIT_EXPENSE":return Object(C.a)(Object(C.a)({},e),{},{expenses:[].concat(Object(B.a)(e.expenses.filter((function(e){return e.id!==t.expense.id}))),[t.expense])});default:return e}},H=Object(X.combineReducers)({user:G,wallet:q}),J=Object(X.createStore)(H,Object(U.composeWithDevTools)(Object(X.applyMiddleware)(z.a)));c.a.render(r.a.createElement(l.a,null,r.a.createElement(o.a,{store:J},r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.4f605473.chunk.js.map